<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>AINOS97BIOS Update Utility</title>
  <style>
    :root{
      --bg:#1b1d22;
      --fg:#c8e4f5;
      --accent:#79e89c;
      --error:#ff8f8f;
      --muted:#7f8a99;
    }
    *{box-sizing:border-box;margin:0;padding:0;}
    html,body{
      width:100%;
      height:100%;
      background:black;
      color:var(--fg);
      font-family:"PxPlus_IBM_VGA8","Press Start 2P",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    }
    body{
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      touch-action:manipulation;
      -webkit-font-smoothing:none;
    }
    .crt{
      position:relative;
      width:100vw;
      height:100vh;
      background:var(--bg);
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    /* scanlines */
    .crt::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        repeating-linear-gradient(
          to bottom,
          rgba(0,0,0,0.25) 0px,
          rgba(0,0,0,0.25) 1px,
          rgba(255,255,255,0) 2px,
          rgba(255,255,255,0) 3px
        );
      mix-blend-mode:soft-light;
      pointer-events:none;
      z-index:2;
    }
    /* vignette + slight noise tint */
    .crt::after{
      content:"";
      position:absolute;
      inset:-10%;
      background:
        radial-gradient(circle at center,
          rgba(0,0,0,0) 0%,
          rgba(0,0,0,0) 60%,
          rgba(0,0,0,0.65) 100%);
      pointer-events:none;
      z-index:3;
    }
    .noise{
      position:absolute;
      inset:-20%;
      background-image:
        linear-gradient(45deg, rgba(255,255,255,0.06) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.06) 50%, rgba(255,255,255,0.06) 75%, transparent 75%, transparent);
      background-size:8px 8px;
      opacity:0.18;
      mix-blend-mode:soft-light;
      animation:noiseMove 0.35s steps(3) infinite;
      pointer-events:none;
      z-index:1;
    }
    @keyframes noiseMove{
      0%{transform:translate3d(0,0,0);}
      50%{transform:translate3d(-10px,10px,0);}
      100%{transform:translate3d(10px,-10px,0);}
    }
    .screen-wrap{
      position:relative;
      z-index:4;
      width:min(960px, 92vw);
      height:min(540px, 80vh);
      border:1px solid rgba(255,255,255,0.15);
      box-shadow:
        0 0 0 2px rgba(0,0,0,0.6),
        0 0 40px rgba(0,0,0,0.9);
      background:radial-gradient(circle at top,
        rgba(255,255,255,0.06) 0,
        rgba(255,255,255,0.01) 40%,
        rgba(0,0,0,0.7) 100%);
      padding:12px 16px;
      display:flex;
      align-items:flex-start;
      justify-content:flex-start;
    }
    #screen{
      white-space:pre-wrap;
      font-family:"PxPlus_IBM_VGA8", "Press Start 2P", "Fira Mono", "SFMono-Regular", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:14px;
      line-height:1.25;
      letter-spacing:0;
      width:100%;
      height:100%;
      overflow:hidden;
      text-shadow:0 0 4px rgba(0,0,0,0.9);
    }
    .cursor{
      display:inline-block;
      width:0.6em;
      color:var(--accent);
      animation:blink 1s step-start infinite;
    }
    @keyframes blink{
      0%,50%{opacity:1;}
      50.01%,100%{opacity:0;}
    }
    .status-locked{color:var(--error);}
    .status-authorized{color:var(--accent);}
    .muted{color:var(--muted);}
    .hint{color:var(--muted); font-size:12px; margin-top:4px;}
    .progress-line{color:var(--accent);}
    .error-line{color:var(--error);}
    .footer-line{color:var(--muted); margin-top:6px;}
    code{font-family:inherit; font-size:0.95em;}
    @media (max-width:600px){
      #screen{font-size:12px;}
    }
  </style>
</head>
<body>
  <div class="crt" id="crtRoot">
    <div class="noise"></div>
    <div class="screen-wrap">
      <div id="screen"></div>
    </div>
  </div>
<script>
(function(){
  const screen = document.getElementById("screen");
  const root = document.getElementById("crtRoot");
  const target = new Date("2026-02-10T00:00:00+09:00");
  let state = "boot"; // boot, locked, authorized, updating, complete
  let updating = false;
  let progressTimer = null;
  let progress = 0;
  let startVersion = null;

  function clearScreen(){
    screen.textContent = "";
  }
  function write(line="", cls){
    const span = document.createElement("div");
    if (cls) span.className = cls;
    span.textContent = line;
    screen.appendChild(span);
    screen.scrollTop = screen.scrollHeight;
  }
  function writeBlank(){
    write("");
  }
  function addCursor(){
    const c = document.createElement("span");
    c.className = "cursor";
    c.textContent = "_";
    const wrap = document.createElement("div");
    wrap.appendChild(c);
    screen.appendChild(wrap);
    screen.scrollTop = screen.scrollHeight;
  }
  function removeCursor(){
    screen.querySelectorAll(".cursor").forEach(c => c.parentElement.remove());
  }

  function bootSequence(){
    clearScreen();
    const lines = [
      "AINOS97BIOS Update Utility",
      "----------------------------------------",
      "IDENTIFYING SELF.................OK",
      "ESTABLISHING PRESENCE............OK",
      "CHECKING INTEGRITY...............OK",
      "LOADING UPDATE MODULE............OK",
      ""
    ];
    let i = 0;
    function next(){
      if (i < lines.length){
        write(lines[i++]);
        setTimeout(next, 260);
      } else {
        checkLock();
      }
    }
    next();
  }

  function checkLock(){
    const now = Date.now();
    writeBlank();
    if (now < target.getTime()){
      state = "locked";
      write("STATUS: LOCKED","status-locked");
      write("Release Date : 2026-02-10");
      writeBlank();
      write("TAP / ENTER = Attempt Authorization","footer-line");
    } else {
      state = "authorized";
      write("STATUS: AUTHORIZED","status-authorized");
      writeBlank();
      write("TAP / ENTER = Execute Update","footer-line");
    }
    addCursor();
  }

  function showLockedError(){
    removeCursor();
    writeBlank();
    write("ERROR: AUTHORIZATION DENIED","error-line");
    writeBlank();
    write("Release Date : 2026-02-10","muted");
    addCursor();
  }

  function randomFraction9(){
    const n = Math.floor(Math.random() * 1e9);
    return String(n).padStart(9,"0");
  }

  function startUpdate(){
    if (updating) return;
    updating = true;
    state = "updating";
    removeCursor();
    writeBlank();
    const frac = randomFraction9();
    startVersion = "2.9" + frac;
    write("UPDATING SELF (" + startVersion + " \u2192 3.0)...");
    writeBlank();
    progress = 0;
    progressLine();
    progressTimer = setInterval(tickProgress, 130);
  }

  function barFromProgress(p){
    const blocks = 20;
    const filled = Math.floor(p / (100/blocks));
    let bar = "[";
    for (let i=0;i<blocks;i++){
      bar += i < filled ? "\u25A0" : "\u25A1";
    }
    bar += "]";
    return bar;
  }

  function progressLine(){
    // remove old progress lines
    Array.from(screen.querySelectorAll(".progress-line")).forEach(el => el.remove());
    const line = "Progress: " + barFromProgress(progress) + " " + String(progress).padStart(3," ") + "%";
    write(line,"progress-line");
  }

  function tickProgress(){
    if (progress >= 100){
      clearInterval(progressTimer);
      progressTimer = null;
      setTimeout(completeUpdate, 600);
      return;
    }
    const step = 2 + Math.floor(Math.random() * 5);
    progress = Math.min(100, progress + step);
    progressLine();
  }

  function completeUpdate(){
    state = "complete";
    updating = false;
    writeBlank();
    write("UPDATE COMPLETE.");
    write("Version: 3.0","status-authorized");
    writeBlank();
    write("TAP / ENTER = Replay Log","footer-line");
    addCursor();
  }

  function handleAction(){
    if (state === "boot") return;
    if (state === "locked"){
      showLockedError();
      return;
    }
    if (state === "authorized"){
      startUpdate();
      return;
    }
    if (state === "updating"){
      // ignore taps during update
      return;
    }
    if (state === "complete"){
      // Replay from authorized state
      clearInterval(progressTimer);
      progressTimer = null;
      updating = false;
      state = "authorized";
      bootSequence();
      return;
    }
  }

  root.addEventListener("pointerdown", function(ev){
    ev.preventDefault();
    handleAction();
  });
  window.addEventListener("keydown", function(ev){
    if (ev.key === "Enter" || ev.key === " "){
      ev.preventDefault();
      handleAction();
    }
  });

  bootSequence();
})();</script>
</body>
</html>
