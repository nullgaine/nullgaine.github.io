<!DOCTYPE html>

<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>サイト内検索 | 江縫栄市立総合病院</title>
  <link rel="stylesheet" href="assets/style.css">
</head>
<body>
  <div id="header"></div>

  <main>
    <section class="panel" role="search">
      <h1>サイト内検索</h1>
      <p class="note">ページタイトルやキーワードで検索できます。</p>
      <div class="searchbox" style="margin-top:12px">
        <input id="q" type="search" placeholder="キーワードを入力" aria-label="検索語" autocomplete="off">
        <button class="btn" onclick="doSearch()">検索</button>
      </div>
    </section>


<div id="results" style="margin-top:8px"></div>


  </main>

  <div id="footer"></div>
  <script src="common.js"></script>
  <script>
  async function loadPart(id, file){
    const res = await fetch(file);
    document.getElementById(id).innerHTML = await res.text();
  }
  loadPart("header", "partials/header.html");
  loadPart("footer", "partials/footer.html");

  const PAGES = [
    { title:"江縫栄市立総合病院", url:"main", desc:"病院トップページ。救急から在宅まで。" },
    { title:"お知らせ", url:"news", desc:"最新のご案内・記録情報" },
    { title:"依頼", url:"yesican", desc:"依頼受付中のお仕事まとめ。" },
    { title:"外来案内", url:"hours", desc:"受付時間・外来スケジュール。" },
    { title:"利用規約", url:"terms", desc:"サイト利用規約。" },
    { title:"アクセス", url:"access", desc:"病院へのアクセス・地図。" },
    { title:"お問い合わせ", url:"contact", desc:"お問い合わせフォーム。" },
    { title:"施設概要", url:"overview", desc:"病院の施設概要。" },
    { title:"図書館", url:"library", desc:"院内図書館ページ。" },
    { title:"リンク", url:"links", desc:"関連サイトへのリンク集。" },
    { title:"外峯", url:"index", desc:"外峯零アーカイブ" },
    { title:"絵", url:"illustlist", desc:"イラストの料金・プラン一覧。" },
    { title:"MIX", url:"mixlist", desc:"MIX依頼の料金・プラン一覧。" },
    { title:"歌見本", url:"utamihon", desc:"歌の見本・サンプル集。" },
    { title:"カフェ", url:"cafepalette", desc:"1階のカフェ。" },
    { title:"カフェ", url:"flepaix", desc:"Fleur de Paix。" },
    { title:"動画", url:"https://youtu.be/gxxHFZWzS3g", desc:"2025年12月33日のテレビ録画" },
    { title:"動画", url:"https://youtu.be/PLdH7i8ruPY", desc:"2025年2月30日の動画記録" },
    { title:"動画", url:"https://youtu.be/dxfWWPZmtv0", desc:"2024年6月31日の緊急放送記録" },
    { title:"wiki", url:"krwiki", desc:"가이네 누르。韓国語版ページ。" },
    { title:"削除すべき記録", url:"d_archive", desc:"web非公開アーカイブ" },
    { title:"記録55", url:"insidemail55", desc:"内部メールアーカイブ" },
    { title:"記録404", url:"notice404", desc:"お知らせアーカイブ" },
    { title:"記録404", url:"notice404-k", desc:"お知らせアーカイブ" },
    { title:"最悪", url:"irrtumderwelt", desc:"災厄アーカイブ" },
    { title:"最悪", url:"irrtumderwelt-e", desc:"災厄アーカイブ" },
    { title:"最悪", url:"irrtumderwelt-k", desc:"災厄アーカイブ" },
    { title:"骵温", url:"meitanteiq", desc:"骵温公式まとめページ。" },
    { title:"赤い眼", url:"redeyes", desc:"赤い眼が内側を見ている" },
    { title:"しらせ", url:"prebox", desc:"akashicive" },
    { title:"外峯", url:"en-dex", desc:"外峯零アーカイブ" },
    { title:"外峯", url:"ko-dex", desc:"外峯零アーカイブ" },
    { title:"災厄", url:"SVkHPHfDxRE", desc:"赤い眼が内側を見ている" },
    { title:"アップデート", url:"release/index", desc:"AINOS97BIOS Update Utility。3周年特設。" },
    { title:"サイト内検索", url:"search", desc:"サイト内検索ページ。" }
  ];

  function doSearch() {
    const raw = document.getElementById('q').value.trim();
    const q = raw.toLowerCase();
    const out = document.getElementById('results');
    
// 特定ワードで裏ルート
　　　if (raw.includes("生体情報再構築研究室")) {
　　  triggerHiddenAccess();
　　  return;
　　　　}
    function triggerHiddenAccess(){
  const pass = prompt("ACCESS RESTRICTED\nPASSWORD:");

  if (!pass) return;

  if (pass.toLowerCase() === "akashicive") {
    window.location.href = "https://gainenull.org/hospivf"; // ←ここ自分のURLに変える
  } else {
    alert("読込み失敗、再度お試し下さい");
  }
}
    if (!q) { out.innerHTML = ''; return; }

    const matched = PAGES.filter(p =>
      p.title.toLowerCase().includes(q) ||
      p.desc.toLowerCase().includes(q) ||
      p.url.toLowerCase().includes(q)
    );

    if (matched.length === 0) {
      out.innerHTML = `<p class="note" style="padding:8px 0">「${escHtml(raw)}」に一致するページは見つかりませんでした。</p>`;
      return;
    }

    const items = matched.map(p => `
      <li style="padding:12px 8px;border-top:1px dashed var(--line)">
        <a href="https://gainenull.org/${p.url}" style="font-size:15px;font-weight:bold">${escHtml(p.title)}</a>
        <p class="note" style="margin:2px 0 0">${escHtml(p.desc)}</p>
      </li>`).join('');

    out.innerHTML = `
      <p class="note" style="margin-bottom:6px">「${escHtml(raw)}」の検索結果：${matched.length}件</p>
      <ul class="list" style="list-style:none;margin:0;padding:12px">
        ${items}
      </ul>`;
  }

  function escHtml(s) {
    return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
  }

  // URLパラメータから検索語を受け取る
  const params = new URLSearchParams(location.search);
  const initQ = params.get('q');
  if (initQ) {
    document.getElementById('q').value = initQ;
    doSearch();
  }

  // Enterキーでも検索
  document.getElementById('q').addEventListener('keydown', e => {
    if (e.key === 'Enter') doSearch();
  });
  </script>

</body>
</html>
