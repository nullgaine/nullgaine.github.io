<!DOCTYPE html>

<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>サイト内検索 | 江縫栄市立総合病院</title>
  <link rel="stylesheet" href="assets/style.css">
</head>
<body>
  <div id="header"></div>

  <main>
    <section class="panel" role="search">
      <h1>サイト内検索</h1>
      <p class="note">ページタイトルやキーワードで検索できます。</p>
      <div class="searchbox" style="margin-top:12px">
        <input id="q" type="search" placeholder="キーワードを入力" aria-label="検索語" autocomplete="off">
        <button class="btn" onclick="doSearch()">検索</button>
      </div>
    </section>


<div id="results" style="margin-top:8px"></div>


  </main>

  <div id="footer"></div>

  <script>
  async function loadPart(id, file){
    const res = await fetch(file);
    document.getElementById(id).innerHTML = await res.text();
  }
  loadPart("header", "partials/header.html");
  loadPart("footer", "partials/footer.html");

  const PAGES = [
    { title:"江縫栄市立総合病院（トップ）", url:"main", desc:"病院トップページ。救急から在宅まで。" },
    { title:"お知らせ", url:"news", desc:"最新のご案内・休診情報。" },
    { title:"お仕事（依頼受付）", url:"yesican", desc:"依頼受付中のお仕事まとめ。" },
    { title:"外来案内", url:"hours", desc:"受付時間・外来スケジュール。" },
    { title:"利用規約", url:"terms", desc:"サイト利用規約。" },
    { title:"アクセス", url:"access", desc:"病院へのアクセス・地図。" },
    { title:"お問い合わせ", url:"contact", desc:"お問い合わせフォーム。" },
    { title:"施設概要", url:"overview", desc:"病院の施設概要。" },
    { title:"図書館", url:"library", desc:"院内図書館ページ。" },
    { title:"関連情報・リンク", url:"links", desc:"関連サイトへのリンク集。" },
    { title:"インデックスページ", url:"internallink", desc:"江縫栄市立総合病院インデックス。" },
    { title:"絵（料金・プラン）", url:"illustlist", desc:"イラストの料金・プラン一覧。" },
    { title:"MIX（料金・プラン）", url:"mixlist", desc:"MIX依頼の料金・プラン一覧。" },
    { title:"歌見本", url:"utamihon", desc:"歌の見本・サンプル集。" },
    { title:"Café Palette", url:"cafepalette", desc:"1階のカフェサイト。" },
    { title:"かふぇあつめ", url:"cafeatsume", desc:"小さな喫茶店の色見本。" },
    { title:"Nullatelier", url:"nullatelier", desc:"Nullatelierページ。" },
    { title:"Fleur de Paix", url:"flepaix", desc:"Fleur de Paix。" },
    { title:"Le Spectre", url:"lespectre", desc:"未名の色標。" },
    { title:"がいね・ぬる（韓国語ページ）", url:"krwiki", desc:"가이네 누르。韓国語版ページ。" },
    { title:"削除すべき記録", url:"d_archive", desc:"アーカイブ。" },
    { title:"セキュリティークリアランス（55）", url:"insidemail55", desc:"院内メール。セキュリティークリアランスを確認してください。" },
    { title:"セキュリティークリアランス（78）", url:"insidemail78", desc:"院内メール。セキュリティークリアランスを確認してください。" },
    { title:"「箱」簡易接続装置", url:"20230210", desc:"2023年2月10日のページ。" },
    { title:"江縫栄市立総合病院からのお知らせ（改正）", url:"notice404", desc:"病院からのお知らせ。" },
    { title:"엔에이 시립 종합병원 알림（개정판）", url:"notice404-k", desc:"韓国語版お知らせ。" },
    { title:"最悪の消滅", url:"irrtumderwelt", desc:"Irrtum der Welt。" },
    { title:"The Worst Demise", url:"irrtumderwelt-e", desc:"英語版ページ。" },
    { title:"이르툼 데어 벨트", url:"irrtumderwelt-k", desc:"韓国語版ページ。" },
    { title:"探偵Q", url:"meitanteiq", desc:"探偵Qページ。" },
    { title:"赤い眼", url:"redeyes", desc:"赤い眼のページ。" },
    { title:"しらせの澪", url:"prebox", desc:"しらせの澪。" },
    { title:"N/A 英語版インデックス", url:"en-dex", desc:"英語版インデックスページ。" },
    { title:"N/A 韓国語版インデックス", url:"ko-dex", desc:"韓国語版インデックスページ。" },
    { title:"SVkHPHfDxRE", url:"SVkHPHfDxRE", desc:"謎のページ。" },
    { title:"3周年特設ページ", url:"release/index", desc:"AINOS97BIOS Update Utility。3周年特設。" },
    { title:"サイト内検索", url:"search", desc:"サイト内検索ページ。" }
  ];

  function doSearch() {
    const raw = document.getElementById('q').value.trim();
    const q = raw.toLowerCase();
    const out = document.getElementById('results');
    
// 特定ワードで裏ルート
　　　if (raw.includes("生体情報再構築研究室")) {
　　  triggerHiddenAccess();
　　  return;
　　　　}
    function triggerHiddenAccess(){
  const pass = prompt("ACCESS RESTRICTED\nPASSWORD:");

  if (!pass) return;

  if (pass.toLowerCase() === "19961207") {
    window.location.href = "https://gainenull.org/hospivf"; // ←ここ自分のURLに変える
  } else {
    alert("読込み失敗、再度お試し下さい");
  }
}
    if (!q) { out.innerHTML = ''; return; }

    const matched = PAGES.filter(p =>
      p.title.toLowerCase().includes(q) ||
      p.desc.toLowerCase().includes(q) ||
      p.url.toLowerCase().includes(q)
    );

    if (matched.length === 0) {
      out.innerHTML = `<p class="note" style="padding:8px 0">「${escHtml(raw)}」に一致するページは見つかりませんでした。</p>`;
      return;
    }

    const items = matched.map(p => `
      <li style="padding:12px 8px;border-top:1px dashed var(--line)">
        <a href="https://gainenull.org/${p.url}" style="font-size:15px;font-weight:bold">${escHtml(p.title)}</a>
        <p class="note" style="margin:2px 0 0">${escHtml(p.desc)}</p>
      </li>`).join('');

    out.innerHTML = `
      <p class="note" style="margin-bottom:6px">「${escHtml(raw)}」の検索結果：${matched.length}件</p>
      <ul class="list" style="list-style:none;margin:0;padding:12px">
        ${items}
      </ul>`;
  }

  function escHtml(s) {
    return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
  }

  // URLパラメータから検索語を受け取る
  const params = new URLSearchParams(location.search);
  const initQ = params.get('q');
  if (initQ) {
    document.getElementById('q').value = initQ;
    doSearch();
  }

  // Enterキーでも検索
  document.getElementById('q').addEventListener('keydown', e => {
    if (e.key === 'Enter') doSearch();
  });
  </script>

</body>
</html>
